<div class="mainBody width-hunnid">
    <div class="mainBody-text" style="text-align: left">
        
        <h1>SIGNAL GENERATOR
        </h1>
        
        <h3>PERSONAL PROJECT</h3>
        <p>
            <svg class='mainindent'><g class='indent'><polygon points="0,0  50,50  0,100  0,70  20,50  0,30"/></g></svg>

            This signal generator utilizes mixed digital/analog hardware design to create sinusoidal, triangle, and square waves up to 5MHz. The analog output also supports amplitude tuning up to 6V peak to peak, phase tuning, and DC offsets from -3V to 3V. These parameters can either be tuned manually through switches and potentiometers found on the board, or digitally through an LAN Ethernet connection. By connecting the device to a computer, it will host a web application which can be accessed using any regular web browser and it will relay commands to the hardware through remote procedure calls.
            <br><br>

            <iframe width="560" height="315" src="https://www.youtube.com/embed/tRuol-sk-jw" frameborder="0" allowfullscreen></iframe>
            <br>

            All my current work can be viewed in detail through the following links:
            <br>

            <ul type="circle">
            <li><a class="fancybox file_link" rel="group" href="/Projects/SIGNAL_GENERATOR/Images/SigGen.pdf" target="_blank">
            Schematics</a></li>
            <li><a class="fancybox file_link" rel="group" href="/Projects/SIGNAL_GENERATOR/Images/board.jpg" target="_blank">
            Board Layout & Routing</a></li>
            <li><a class="fancybox file_link" rel="group" href="https://developer.mbed.org/users/smoubedi/code/SigGen/" target="_blank">
            Firmware Repository</a></li>
            </ul>

            Researching techniques to generate the sinusoidal waveforms was one of my many tasks during my internship on the Apple Watch team, so I took this knowledge and incorporated into making a full-system signal generator. The two primary options I was considering were to use a pseudo-analog wein-bridge oscillator or a fully digital approach with analog filtering. 
            <br><br>
            <a class="fancybox" rel="group" href="/Projects/SIGNAL_GENERATOR/Images/Wein_Bridge_Oscillator.gif"><img src="/Projects/SIGNAL_GENERATOR/Images/Wein_Bridge_Oscillator.gif"></a>
            <br><br>
            A wien-bridge oscillator would have definitely provided less harmonic distortion, would have simplified the overall design and BOM cost, but it would also have been a pain to tune and debug. Furthermore, amplitude stability poses a difficult challenge in that solution and a 5MHz bandwidth would be impractical without using multiple, tunable feedback paths. The final solution utilizes a DDS (direct digital synthesis) IC, which is essentially a DAC reading a built-in sine wave ROM. As a result, this circuit also needs a good reconstruction filter to remove any high-frequency components generated by the DAC. This solution also gave me better control over the frequency, phase, and also supports triangle wave outputs as a nice bonus.
            <br><br>
            The entire system can be powered off of either the USB connection, or an external supply ranging from 4V5 to 6V5. There are a few power supplies in the system, used to provide a 3V3 rail for digital logic, a very low noise 6V supply for the analog systems, and a virtual ground at 3V. 
            <br><br>
            The reconstruction filter is an active 2nd order Buttersworth low pass filter with a center frequency at 5.2MHz. Figure 19 below describes the frequency spectrum of a generic DDS output: 
            <br><br>
            <a class="fancybox" rel="group" href="/Projects/SIGNAL_GENERATOR/Images/spectrum.png"><img src="/Projects/SIGNAL_GENERATOR/Images/spectrum.png"></a>
            <br><br>
            Originally the plan was to use a 3rd or 4th order filter to minimize the transition band, but after some further research, I concluded that the quicker roll off was not necessary and that minimizing complexity should be priority. The cut off frequency was set to 5.2 MHz instead of 5MHz to account for any ripple or peaking in the frequency responce of the filter, and for any component variations. Although 5MHz was my target, Nyquist states that I could have theoretically pushed the frequency cap to 8MHz since the reference clock used by the system was 16MHz. At 5MHz, the next harmonic frequency would occur at 11MHz giving me a minimum possible transition band of 5.8MHz, or 0.715 decades. At 20db/dec, my 2nd order filter would provide -14.32dB of attenuation which is plenty. This entire filter is bypassed through the analog switch when set to square wave mode, since we need to maintain the high frequency components for fast rise/fall times.
            <br><br>
            Finally, the output stage consisted of a simple inverting amplifier to provide tuneable gain/attenutation and a summation amplifier to allow for DC offsets. To achieve better output driving capabilities, I originally planned and prototyped a push-pull follower to boost my output current capabilities, but later decided to use parallel opamps. To ensure op amp stability and impedance matching, an optional 10nF parallel capacitor and 50 Ohm trimpot is added in series. Figure 69 below decribes the R-series/C-parallel relationship for maintaining stability:
            <br><br>
            <a class="fancybox" rel="group" href="/Projects/SIGNAL_GENERATOR/Images/stability.png"><img src="/Projects/SIGNAL_GENERATOR/Images/stability.png"></a>
            <br><br>


            
        </p>
    </div>
</div>  
